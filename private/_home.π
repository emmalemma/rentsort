{%
$getCurrentUser callback: (data)->
									unless data.user
										loadPartial '_index.html'
									else
										user = data.user
										for field of user
											$$("#user_details ##{field}").set 'text', data.user[field]
										$$("#user_details #home").set 'text', user.home.display	
										$$("#user_details #work").set 'text', user.work.display
										
%}

<div id="user_details">
	<div>Your email: <span id="_id"></span></div>
	<div>Your home: <span id="home"></span></div>
	<div>Your work: <span id="work"></span></div>
	<div>Your rent: <span id="rent"></span></div>
</div>

<span id="logout">Log out.</span>
{%
	$('logout').addEvent 'click', -> $logout callback: -> loadPartial '_index'
%}


<span id="load">Load matches.</span>
{%
	$('load').addEvent 'click', -> $findMatches callback: loadMatches
	
	loadMatches =(data)->
		console.log data
%}
{%
	$matches callback: (result)->
								console.log {result_of_matches: result}
								return if result.error
								for match in result.matches
									console.log "Distance: #{match.distance} Rent: #{match.rent}"
									console.log $('matches')
									$('matches').grab(new Element('div', {text: "Distance: #{match.distance} Rent: #{match.rent}"}))
%}

<div id="matches">
</div>

